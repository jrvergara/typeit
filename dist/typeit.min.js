/*!
 *
 *   typeit - The most versatile animated typing utility on the planet.
 *   Author: Alex MacArthur <alex@macarthur.me> (https://macarthur.me)
 *   Version: v5.10.7
 *   URL: https://typeitjs.com
 *   License: GPL-2.0
 *
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.TypeIt=e()}(this,function(){"use strict";function t(t){let e=t.getBoundingClientRect();return!(e.right>window.innerWidth||e.bottom>window.innerHeight)&&!(e.top<0||e.left<0)}function e(t,e){return Math.abs(Math.random()*(t+e-(t-e))+(t-e))}function i(t,e=""){let i=document.createElement("style");i.id=e,i.appendChild(document.createTextNode(t)),document.head.appendChild(i)}function s(t){let e=(new DOMParser).parseFromString(t,"text/html"),i=[].slice.call(e.body.querySelectorAll("*"));i.forEach(e=>{t=t.replace(e.outerHTML,"{%}")});let s=t.split("");return s.forEach((t,e)=>{if("{"===t&&"%"===s[e+1]&&"}"===s[e+2]){s.splice(e,3);let t=e,n=i.shift();n.innerHTML.split("").forEach(i=>{let r=[].slice.call(n.attributes).map(t=>({name:t.name,value:t.nodeValue}));s.splice(t,0,{tag:n.tagName,attributes:r,content:i,isFirstCharacter:t===e}),t++})}}),s}function n({tag:t,attributes:e=[],content:i=""}){let s=document.createElement(t);return void 0!==e&&e.forEach(t=>{s.setAttribute(t.name,t.value)}),s.innerHTML=i,s.outerHTML}window.TypeItDefaults={strings:[],speed:100,deleteSpeed:null,lifeLike:!0,cursor:!0,cursorChar:"|",cursorSpeed:1e3,breakLines:!0,startDelay:250,startDelete:!1,nextStringDelay:750,loop:!1,loopDelay:!1,html:!0,autoStart:!0,callback:!1,beforeString:!1,afterString:!1,beforeStep:!1,afterStep:!1,afterComplete:!1};class r{constructor(t,e,i,s=!0,n=null){var r;this.id=e,this.typeit=n,this.autoInit=s,this.element=t,this.timeouts=[],this.hasStarted=!1,this.isFrozen=!1,this.isComplete=!1,this.hasBeenDestroyed=!1,this.queue=[],this.isInTag=!1,this.stringsToDelete="",this.inlineStyles={base:"display:inline;position:relative;font:inherit;color:inherit;line-height:inherit;"},this.setOptions(i,window.TypeItDefaults,!1),this.prepareTargetElement(),this.prepareDelay("nextStringDelay"),this.prepareDelay("loopDelay"),this.prepareDOM(),this.options.strings=(r=this.options.strings,(Array.isArray(r)?r.slice(0):r.split("<br>")).map(t=>t.replace(/<\!--.*?-->/g,""))),this.options.startDelete&&this.stringsToDelete&&(this.insert(this.stringsToDelete),this.queue.push([this.delete]),this.insertSplitPause(1)),this.generateQueue(),this.fire()}async fire(){for(let t of this.queue)await new Promise((e,i)=>{this.setPace(),setTimeout(()=>{t[2]&&t[2].isFirst&&this.options.beforeString&&this.options.beforeString(t,this.queue,this.typeit),this.options.beforeStep&&this.options.beforeStep(t,this.queue,this.typeit),t[0].call(this,t[1],t[2]),t[2]&&t[2].isLast&&this.options.afterString&&this.options.afterString(t,this.queue,this.typeit),this.options.afterStep&&this.options.afterStep(t,this.queue,this.typeit),e()},this.typePace)});if(this.options.afterComplete&&this.options.afterComplete(this.typeit),this.options.loop){let t=this.options.loopDelay?this.options.loopDelay:this.options.nextStringDelay;console.log(this.queue),this.queue.shift(),this.queue.unshift([this.pause,t.before]),setTimeout(()=>{this.fire()},t.after)}}prepareDOM(){this.element.innerHTML=`\n      <span style="${this.inlineStyles.base}" class="ti-wrapper">\n        <span style="${this.inlineStyles.base}" class="ti-container"></span>\n      </span>\n      `,this.element.setAttribute("data-typeitid",this.id),this.elementContainer=this.element.querySelector(".ti-container"),this.elementWrapper=this.element.querySelector(".ti-wrapper"),i(`\n        .${this.elementContainer.className}:before {\n          content: '.';\n          display: inline-block;\n          width: 0;\n          visibility: hidden;\n        }\n      `)}reset(){return new r(this.element,this.id,this.options,this.autoInit,this.typeit)}contents(t=null){return null===t?this.options.html?this.elementContainer.innerHTML:this.elementContainer.innerText:(this.elementContainer[this.options.html?"innerHTML":"innerText"]=t,t)}prepareDelay(t){let e=this.options[t];if(!e)return;let i=Array.isArray(e),s=i?null:e/2;this.options[t]={before:i?e[0]:s,after:i?e[1]:s,total:i?e[0]+e[1]:e}}generateQueue(t=null){t=null===t?[this.pause,this.options.startDelay]:t,this.queue.push(t),this.options.strings.forEach((t,e)=>{if(this.queueString(t),e+1!==this.options.strings.length){if(this.options.breakLines)return this.queue.push([this.break]),void this.insertSplitPause(this.queue.length);this.queueDeletions(t),this.insertSplitPause(this.queue.length,t.length)}})}queueDeletions(t=null){let e="string"==typeof t?s(t).length:t;for(let t=0;t<e;t++)this.queue.push([this.delete,1])}queueString(t){if(!t)return;let e=(t=s(t)).length;t.forEach((t,i)=>{let s=[this.type,t];0===i&&s.push({isFirst:!0}),i+1===e&&s.push({isLast:!0}),this.queue.push(s)})}insertSplitPause(t,e=1){this.queue.splice(t,0,[this.pause,this.options.nextStringDelay.before]),this.queue.splice(t-e,0,[this.pause,this.options.nextStringDelay.after])}init(){if(this.hasStarted)return;if(this.cursor(),this.options.autoStart)return this.hasStarted=!0,void this.next();if(t(this.element))return this.hasStarted=!0,void this.next();let e=this;window.addEventListener("scroll",function i(s){t(e.element)&&!e.hasStarted&&(e.hasStarted=!0,e.next(),s.currentTarget.removeEventListener(s.type,i))})}cursor(){let t="visibility: hidden;";this.options.cursor&&(i(`\n        @keyframes blink-${this.id} {\n          0% {opacity: 0}\n          49% {opacity: 0}\n          50% {opacity: 1}\n        }\n\n        [data-typeitid='${this.id}'] .ti-cursor {\n          animation: blink-${this.id} ${this.options.cursorSpeed/1e3}s infinite;\n        }\n      `,this.id),t=""),this.elementWrapper.insertAdjacentHTML("beforeend",`<span style="${this.inlineStyles.base}${t}left: -.25ch;" class="ti-cursor">${this.options.cursorChar}</span>`)}insert(t,e=!1){e?this.elementContainer.lastChild.insertAdjacentHTML("beforeend",t):this.elementContainer.insertAdjacentHTML("beforeend",t),this.contents(this.contents().split("").join(""))}prepareTargetElement(){[].slice.call(this.element.childNodes).forEach(t=>{void 0!==t.classList&&t.classList.contains("ti-container")&&(this.element.innerHTML="")}),!this.options.startDelete&&this.element.innerHTML.length>0?this.options.strings=this.element.innerHTML.trim():this.stringsToDelete=this.element.innerHTML}break(){this.insert("<br>"),this.next()}pause(t=!1){setTimeout(()=>{this.next()},t||this.options.nextStringDelay.total)}type(t){if("string"!=typeof t)return"object"==typeof t?t.isFirstCharacter?void this.insert(n({tag:t.tag,attributes:t.attributes,content:t.content})):void this.insert(t.content,!0):void 0;this.insert(t)}setOptions(t,e=null,i=!0){let s={};null===e&&(e=this.options);for(let t in e)s[t]=e[t];for(let e in t)s[e]=t[e];this.options=s,i&&this.next()}setPace(){let t=this.options.speed,i=null!==this.options.deleteSpeed?this.options.deleteSpeed:this.options.speed/3,s=t/2,n=i/2;this.typePace=this.options.lifeLike?e(t,s):t,this.deletePace=this.options.lifeLike?e(i,n):i}delete(){let t=s(this.contents());t.splice(-1,1),t=(t=t.map(t=>"object"==typeof t?n({tag:t.tag,attributes:t.attributes,content:t.content}):t)).join("").replace(/<[^\/>][^>]*><\/[^>]+>/,""),this.contents(t)}empty(){this.contents("")}next(){}}class o{constructor(t,e,i=!0){this.id=Math.random().toString(36).substring(2,15),this.instances=[],this.elements=[],this.args=e,this.autoInit=i,"object"==typeof t&&(void 0===t.length?this.elements.push(t):this.elements=t),"string"==typeof t&&(this.elements=document.querySelectorAll(t)),this.generateInstances()}generateInstances(){[].slice.call(this.elements).forEach(t=>{this.instances.push(new r(t,this.id,this.args,this.autoInit,this))})}queueUp(t,e=null){this.init(!0),this.instances.forEach(i=>{i.queue.push([i[t],e]),!0===i.isComplete&&i.next(),i.isComplete=!1})}}return class extends o{constructor(t,e,i=!0){super(t,e,i)}get isComplete(){return!!this.instances.length&&this.instances[0].isComplete}get hasBeenDestroyed(){return!!this.instances.length&&this.instances[0].hasBeenDestroyed}get hasStarted(){return!!this.instances.length&&this.instances[0].hasStarted}get isFrozen(){return!!this.instances.length&&this.instances[0].isFrozen}type(t=""){return this.init(!0),this.instances.forEach(e=>{e.queueString(t),!0===e.isComplete&&e.next(),e.isComplete=!1}),this}delete(t=null){return this.queueUp("delete",t),this}pause(t=null){return this.queueUp("pause",t),this}empty(){return this.queueUp("empty"),this}break(){return this.queueUp("break"),this}options(t){return this.queueUp("setOptions",t),this}freeze(){this.instances.forEach(t=>{t.isFrozen=!0})}unfreeze(){this.instances.forEach(t=>{t.isFrozen&&(t.isFrozen=!1,t.next())})}destroy(t=!0){this.instances.forEach(e=>{e.timeouts.forEach(t=>{clearTimeout(t)}),e.timeouts=[],t&&e.options.cursor&&e.elementWrapper.removeChild(e.elementWrapper.querySelector(".ti-cursor")),e.hasBeenDestroyed=!0})}reset(){this.instances=this.instances.map(t=>t.reset())}init(t=!1){this.instances.forEach(e=>{t?e.autoInit&&e.init():e.init()})}}});
